<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="memberMapper">

<select id="login"
  		parameterType="member"
		resultType="member"
  	>
  		SELECT
  		      MEMBER_NO memberNo,
  		      MEMBER_ID memberId,
  		      MEMBER_PWD memberPwd,
  		      MEMBER_NAME memberName,
  		      NICKNAME nickname,
  		      BORNDATE bornDate,
  		      EMAIL email,
  		      PHONE phone,
  		      ADDRESS address,
  		      ADDR_DETAIL addrDetatil
  		  FROM
  		      MEMBER       
  	     WHERE	      
  		      MEMBER_ID = #{memberId}
  		   AND
  		      DELETE_YN = 'N'       
  	</select>
  	
  	
  	<insert id="insertMember"
  		parameterType="member"
  	>
  	INSERT
  	  INTO
  	 MEMBER
  	       (
  	       	MEMBER_NO,
  	       	MEMBER_ID,
  	       	MEMBER_PWD,
  	       	MEMBER_NAME,
  	       	NICKNAME,
  	       	EMAIL,
  	       	BORNDATE,
  	       	PHONE,
  	       	ADDRESS,
  	       	ADDR_DETAIL
  	       )
  	 VALUES
  	  	   (
  	  	   SEQ_MEMBER.NEXTVAL,
  	  	   #{memberId},
  	  	   #{memberPwd},
  	  	   #{memberName},
  	  	   #{nickname},
  	  	   #{email},
  	  	   #{bornDate},
  	  	   #{phone},
  	  	   #{address},
  	  	   #{addrDetail}
  	  	   )    
  	</insert>
  
  
  	<select id="idCheck"
  		parameterType="string"
  		resultType="_int"
  	>

  	SELECT
  	      COUNT(*)
  	  FROM
  	      MEMBER
  	 WHERE
  	      MEMBER_ID = #{checkId}
  	   AND
  	      DELETE_YN = 'N'  
  	</select>
  
  	<select id="findId"
  		parameterType="member"
  		resultType="string"
  	>
  	SELECT
  		  MEMBER_ID
  	  FROM
  	      MEMBER
  	 WHERE
  	      MEMBER_NAME = #{memberName}
  	   AND
  	      PHONE = #{phone}
  	   AND
  	      DELETE_YN = 'N'               	  
  	</select>
  
  <select id="findPwd"
  	parameterType="member"
  	resultType="_int"
  >
  	SELECT
  	      COUNT(*)
	  FROM
	      MEMBER
	 WHERE
	      DELETE_YN = 'N'
	   AND
	      MEMBER_ID = #{memberId}
	   AND
	       MEMBER_NAME = #{memberName}
	   AND
	      EMAIL = #{email}       	  
  </select>
  
  <update id="updatePwd"
  parameterType="member"
  >
  UPDATE
  		MEMBER
  	 SET	
        MEMBER_PWD = #{memberPwd},
        EMPTY_CODEYN = 'Y'
   WHERE
	    MEMBER_NAME = #{memberName}
	 AND   
        MEMBER_ID = #{memberId}
     AND
        EMAIL = #{email}   
     AND
  	    DELETE_YN = 'N' 
  </update>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
</mapper>